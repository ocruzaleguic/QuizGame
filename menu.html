<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menú Principal</title>
    <link rel="stylesheet" href="./styles.css">
</head>

<body data-page="menu">

    <div class="container">
        <h2 class="menu">Menú Principal</h2>

        <p id="currentArea" class="current-area"></p>


        <p class="user-xp">
            XP actual: <span id="xpValue">0</span>
        </p>

        <button class="btn-primary" onclick="location.href='quiz.html'">
            Play
        </button>

        <button class="btn-primary" onclick="location.href='seleccion-area.html'">
            Cambiar área
        </button>

        <button class="btn-primary" onclick="location.href='settings.html'">
            Settings
        </button>
        
        <button class="btn-primary" onclick="location.href='achievements.html'">
            Logros
        </button>

        <button class="btn-secondary" onclick="logout()">Logout</button>

    </div>

    <!-- SEGURIDAD -->
    <script type="module">
        import { requireAuth, lsGet } from "./js/utils.js";
        import { logout } from "./js/auth.js";
        import { showSelectedArea } from "./js/areaselect.js";

        document.addEventListener("DOMContentLoaded", () => {
            requireAuth();

            // Mostrar XP
            const user = lsGet("loggedUser");
            const xpElement = document.getElementById("xpValue");
            xpElement.textContent = user?.gamification?.XP ?? 0;

            // Mostrar área seleccionada
            showSelectedArea("currentArea");
        });

        window.logout = logout;
    </script>


</body>

</html>